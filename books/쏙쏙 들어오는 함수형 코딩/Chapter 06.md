# Chapter 06. 불변성 유지하기

> 자바스크립트 배열과 객체에 **불변 데이터**를 다룰 수 있는 동작을 만들고 적용

- 배열과 객체 데이터에 쓸 수 있고, 깊이 중첩된 데이터에도 동작하는 **카피-온-라이트** 설계

  > **중첩(nested)** : 데이터 구조 안에 데이터 구조가 있는 경우

- 동작을 <u>읽기, 쓰기, 둘 다 하는 것</u>으로 분류할 수 있음

  - 읽기(read) : 데이터를 바꾸지 않고 정보를 꺼내는 것
    - ex. 제품 개수 가져오기, 가격 가져오기 등
  - 쓰기(write) : 데이터가 바뀔 수 있기 때문에 원본 데이터가 바뀌지 않도록 원칙이 필요
    - ex. 제품 추가하기, 가격 설정하기 등

<br>

## 카피-온-라이트

> 쓰기(write) 동작을 위한 불변성 원칙

### 카피-온-라이트 원칙 세 단계

1. 복사본 만들기
2. 복사본 변경하기 (원하는 만큼)
3. 복사본 리턴하기

```js
function add_element_last(array, elem) {
    var new_array = array.slice();  // 1. 복사본 만들기
    new_array.push(elem);  // 2. 복사본 변경하기
    return new_array;  // 3. 복사본 리턴하기
}
```

> 데이터를 바꾸지 않고 리턴했기 때문에 '쓰기'가 아닌 '읽기' 가 됨

```js
function remove_item_by_name(cart, name) 
```

