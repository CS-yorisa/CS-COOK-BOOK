# 5.1 라우터의 동작 방식과 역할

## 라우터(Router)란?

<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/21/Adsl_connections.jpg/1920px-Adsl_connections.jpg" alt="img" style="zoom:30%;" />

- 3계층에서 동작하는 네트워크 장비의 대표격으로 경로를 지정해줌
- 컴퓨터 네트워크 간에 데이터 패킷을 전송할 때 사용



#### ✅ 라우터와 L3 스위치

- 스위치는 대표적인 **2계층 장비**지만, 라우터처럼 **3계층에서 동작하는 L3 스위치**도 존재
- **이전에는 구현 방법에 따라** 라우터(소프트웨어), 스위치(하드웨어)로 구분
- 최근에는 기술의 발달로 구분하기 어려워짐 → L3 스위치와 라우터의 동작 방식이 같음



## 라우터의 동작 방식

### 1. 경로 지정

- 다양한 경로 수집 후, 최적의 경로를 라우팅 테이블에 저장
- 패킷이 라우터로 들어오면 도착지 IP 주소와 라우팅 테이블을 비교해 최선의 경로로 패킷을 내보냄



#### ✅ 경로를 지정하는 방법

- **IP 주소는 네트워크 주소와 호스트 주소로 나뉜 계층 구조**로 로컬 네트워크와 원격지 네트워크를 구분할 수 있고, 이 **네트워크 주소를 기반으로 경로를 찾을 수 있음**

  ⇒ 라우터는 이 IP 주소를 확인해 <u>**원격지에 있는 적절한 경로로 패킷을 포워딩**</u>

  

- 경로 지정을 위한 경로 학습 방법

  1. IP 주소를 입력하며 자연스럽게 인접 네트워크 정보를 얻는 방법
  2. 관리자가 직접 경로 정보를 입력하는 방법
  3. 라우터끼리 서로 경로 정보를 자동으로 교환하는 방법

<img src="https://user-images.githubusercontent.com/37922134/182856901-d4cc429b-7d2f-4180-9419-55d841ea7dc4.jpeg" alt="IMG_2569" style="zoom:20%;" />



### 2. 브로드캐스트 컨트롤(Broadcast Control)

- 3계층에서 동작하고, 들어온 패킷의 목적지 주소가 라우팅 테이블에 없으면 패킷을 버림
  
  - 스위치처럼 목적지가 없거나 명확하지 않은 패킷이 모두 플러딩되면 통신불능 상태가 됨
- 바로 연결되어 있는 네트워크 정보를 제외하고 **경로 습득 설정을 하지 않으면 패킷을 포워딩할 수 없음**

- **멀티캐스트 정보를 습득하지 않고, 브로드캐스트 패킷을 전달하지 않음**

  ⇒ 브로드캐스트가 다른 네트워크로 전파되는 것을 막을 수 있음 : `브로드캐스트 컨트롤/멀티캐스트 컨트롤`

  ⇒ 이를 통해 네트워크를 분할해 네트워크 성능을 높일 수 있음



### 3. 프로토콜 변환

- **서로 다른 프로토콜로 구성된 네트워크를 연결**
  - 현대는 이더넷으로 수렴되며 줄어든 역할
- 패킷 포워딩 과정에서 2계층까지의 헤더 정보를 벗겨내 3계층 주소를 확인 한 후, 2계층 헤더 정보를 새로 만들어 외부로 내보냄