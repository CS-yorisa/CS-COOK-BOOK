# 3.6 서브넷과 게이트웨이

## 서브넷과 게이트웨이의 용도

- 로컬 네트워크에서는 ARP 브로드 캐스트를 이용해 도착지 MAC 주소를 학습할 수 있고, MAC 주소를 이용해 직접 통신할 수 있음
- 원격 네트워크 통신은 네트워크를 넘어 전달되지 못하는 브로드캐스트의 성질 때문에 네트워크 장비의 도움이 필요
- 이러한 장비를 게이트웨이라고 하고, 게이트웨이에 대한 정보를 PC나 네트워크 장비에 설정하는 항목이 기본 게이트 웨이

![img](https://postfiles.pstatic.net/20150721_20/triride_1437438524544sTfbe_PNG/1.png?type=w2)

- 기본 게이트웨이는 3계층 장비가 수행하고, 여러 네트워크와 연결되면서 적절한 경로를 지정해주는 역할
- 목적지가 동일 네트워크인지 원격 네트워크인지에 따라 통신 방식이 달라지므로 목적지를 확인하는 작업이 필요
- 이때 서브넷 마스크를 이용하여 목적지 IP와 자신의 IP가 같은 네트워크 주소에 속하는지 파악



## 2계층 통신과 3계층 통신

- 2계층 통신은 로컬 네트워크 통신, 3계층 통신은 원격지 네트워크 통신
  - 로컬 네트워크에서는 3계층의 장비를 통하지 않아도 통신이 가능 (L2 통신이라고 함)
  - 원격 네트워크 통신은 3계층 장비의 도움 없이는 통신이 불가능 (L3 통신이라고 함)
- 게이트웨이에서 ARP 응답을 받은 단말은 도착지 MAC 주소에 응답받은 기본 게이트웨이 MAC 주소를 적어놓고 통신을 시작
- 로컬 통신은 도착지 MAC 주소와 IP 주소가 같은 반면, 원격지 통신은 도착지 MAC 주소와 도착지 IP 주소가 다름
  - 도착지 IP 주소는 통신의 실제 도착지이고, 도착지 MAC 주소는 기본 게이트웨이의 MAC 주소가 사용됨