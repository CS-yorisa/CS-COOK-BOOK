# 3.1 유니캐스트, 멀티캐스트, 브로드캐스트, 애니캐스트

- 출발지에서 목적지로 데이터를 전송할 때 사용하는 통신 방식



## 유니캐스트

![img](https://chaelin1211.github.io/img/posts/inPost/network-communication-01.png)

- 출발지와 목적지가 명확히 하나로 정해진 **1:1 통신**
- 실제로 사용하는 대부분의 통신 방식



## 브로드캐스트

![img](https://chaelin1211.github.io/img/posts/inPost/network-communication-02.png)

- **1: 모든 통신**
- 동일 네트워크에 존재하는 모든 호스트가 목적지
- 유니캐스트로 통신하기 전, 상대방의 정확한 위치를 알기 위해 사용
- 기본적으로 로컬 네트워크 내에서 모든 호스트에 패킷을 전달할 때 사용



## 멀티캐스트

![img](https://chaelin1211.github.io/img/posts/inPost/network-communication-03.png)

- **1:그룹(멀티캐스트 구독 호스트) 통신**
- 멀티캐스트 그룹주소를 이용해 해당 그룹에 속한 다수의 호스트로 패킷을 전송
- IPTV와 같은 실시간 방송, 사내 방송이나 증권 시세 같이 **단방향으로 다수에게 동시에 같은 내용을 전달**할 때 사용



## 애니캐스트

![img](https://chaelin1211.github.io/img/posts/inPost/network-communication-04.png)

- 1:1 통신 (목적지는 동일 그룹 내의 1개 호스트)
- **다수의 동일 그룹(주소가 같은 호스트) 중 가장 가까운 호스트에서 응답**
- 가장 가까운 DNS 서버나 게이트웨이를 찾을 때 사용



### 애니캐스트 vs 유니캐스트

- 최종 통신은 1:1 로 동일하나, 통신할 수 있는 후보자가 다름
- 유니캐스트는 출발지와 목적지가 모두 한 대
- 애니캐스트는 같은 목적지 주소를 가진 서버가 여러 대여서 다수의 통신 가능 후보군이 존재



## 통신 방식 정리

- 통신 방식 구분 시, 목적지 주소를 기준으로 구분 해야 함

| 타입         | 통신 대상 | 범위                  | IPv4 | IPv6 | 예제       |
| ------------ | --------- | --------------------- | ---- | ---- | ---------- |
| 유니캐스트   | 1:1       | 전체 네트워크         | O    | O    | HTTP       |
| 브로드캐스트 | 1:모든    | 서브넷(로컬 네트워크) | O    | X    | ARP*       |
| 멀티캐스트   | 1:그룹    | 정의된 구간           | O    | O    | 방송       |
| 애니캐스트   | 1:1       | 전체 네트워크         | △    | O    | 6 to 4 DNS |

> ARP : 주소 결정 프로토콜. 네트워크 상에서 IP 주소를 물리적 네트워크 주소로 대응(bind) 시키기 위해 사용되는 프로토콜



## BUM 트래픽

- **B**roadcast, **U**nknown Unicast, **M**ulticast를 지칭
- B, U, M은 서로 다른 트래픽이나 네트워크에서의 동작은 서로 비슷함 



### 언노운 유니캐스트

- 유니캐스트여서 목적지 주소는 정확히 명시되어 있지만 네트워크에서의 동작은 브로드캐스트와 같음
- 스위치가 목적지에 대한 주소를 학습하지 못한 상황이어서 패킷을 모든 포트로 플러딩(전송)함

- 전달받는 모든 NIC에서 도착지 주소를 확인하고 자신이 목적지가 아닌 패킷을 버리게 되는데, 이때 네트워크 자원을 사용하므로 불필요 BUM 트래픽이 늘어나면 성능이 저하됨
- 이더넷 환경에서는 ARP 브로드캐스트를 먼저 보내고, 이후 통신을 시작하므로 BUM 트래픽이 많이 발생하지 않음