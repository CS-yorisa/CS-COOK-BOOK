# 4.1 스위치 장비 동작
- 2계층의 핵심 장비인 스위치는 2계층 주소인 MAC주소를 기반으로 동작
	- 네트워크 중간에서 패킷을 받아 필요한 곳에만 보내주는 장비
	- 아무 설정 없이 네트워크에 연결해도 MAC주소 기반 패킷 전달 방식으로 작동 가능
- 스위치가 없다면 패킷을 전송할 때 서로 경합해 네트워크 성능 저하
	- 경쟁을 없애고, 여러 장비가 간섭 없이 통신하도록 도와주는 장치
- MAC주소 테이블
	- MAC주소와 단말이 위치하는 인터페이스 정보를 매핑한 테이블
	- 만약 MAC주소 테이블이 없다면 패킷을 전체 포트로 전송, MAC주소 테이블을 활용하여 특정 포트로만 전송함
	- 스위치 동작방식은 플러딩, 어드레스 러닝, 포워드/필터링으로 구분됨

#### ARP
- Address Resolution Protocol
- 네트워크에서 IP주소를 물리적 네트워크 주소로 대응시키기 위한 프로토콜

#### 스위치, 포트, 패킷
- 스위치
	- 개별 컴퓨터 또는 허브 및 스위치를 연결하는 다중 포트 장비
	- L2, L3, L4, L7 스위치가 있음
	- L2 스위치 : 가장 흔하고 저렴함. MAC 주소를 읽고 스위칭.
	- L3 스위치 : IP 주소, IPX 주소를 읽고 스위칭, IP 주소 기반 트래픽 조절 기능 담당. 하드웨어를 사용한 라우터이므로, 라우팅 스위치로 불리기도 하며, ASIC 스위칭 기술 사용
	- L4 스위치 : TCP/UDP 프로토콜에서 스위칭 수행, 적절한 서버로 패킷 전송.
	- L7 스위치 : L4가 가진 문제를 해결하기 위해 IP, 포트 정보 뿐만 아니라, URL, 쿠키 등 정보를 종합적으로 검사하여 서비스 제공
- 포트
	- TCP/IP 네트워크에서 포트 번호는 컴퓨터 내부에서 실행되는 프로그램을 분배하기 위한 숫자
	- 물리적인 플러그, 소켓이 아니라 논리적 할당
	- 일반적인 제한은 없지만, 1~1024는 시스템이 사용하여 1025~65535 사이 포트 번호를 사용하는것이 좋음
- 패킷
	- 패키지와 버킷(덩어리)의 합성어로, 데이터 전송을 위해 자른 전송 단위
	- 헤더, 데이터, 테일러로 구성
	- 2계층 내려가기 전까지 3~4계층 데이터 단위를 패킷이라 정의, 1~2계층 데이터 단위는 프레임이라 지칭

## 플러딩(Flooding)
- 스위치를 부팅하면 아무 정보가 없고, 네트워크를 중재하는 역할보다 허브와 같은 역할로 동작
	- 허브는 패킷이 들어온 포트를 제외한 모든 포트로 전달
	- 스위치가 허브처럼 작동하는 것을 플러딩이라 부름
- 스위치는 패킷이 들어오면 MAC주소 테이블 확인
	- 해당 MAC주소가 있는지 확인, 없다면 모든 포트에 전송
- 플러딩은 정상적인 스위치 작업이지만, 너무 많이 일어나면 스위치가 제 역할을 하지 못함
	- 패킷이 스위치에 들어오면 해당 패킷과 MAC주소를 학습해 MAC주소 테이블을 만들고 전달 
- BUT 실제로 스위치가 플러딩 하는 것은 제 기능을 하지 못한다는 의미
	- 이더넷-TCP/IP 네트워크에서 ARP 브로드캐스트를 미리 주고 받은 후, 실제 데이터를 보낼 때 플러딩하지 않음
	- 이 결과 허브에 비해 보안에 도움이 됨

## 어드레스 러닝(Address Learning)
- MAC주소 테이블을 만들고 유지하는 과정
	- 패킷의 출발지 MAC주소 정보를 이용

## 포워딩, 필터링(Forwarding/Filtering)
- 스위치는 패킷이 들어온 경우 도착지 MAC주소로 해당하는 패킷으로 '포워딩', 다른 포트로 보내지 않도록 '필터링'
- 통신이 다른 포트에 영향을 미치지 않으므로 독립적으로 동작 가능
- 스위치는 일반적으로 유니캐스트에 대해서만 포워드, 필터링
	- BUM 트래픽(브로드캐스트, 언노운 유니캐스트, 멀티캐스트)는 다르게 동작
		- [3.1 유니캐스트, 멀티캐스트, 브로드캐스트, 애니캐스트](../03장/3.1%20유니캐스트,%20멀티캐스트,%20브로드캐스트,%20애니캐스트.md)
	- 브로드캐스트, 멀티캐스트는 모두 플러딩
	- 언노운 유니캐스팅은 MAC주소 테이블에 없는 주소이므로 플러딩 동작

# 참조
- [스위치의 종류, 포트, 패킷](https://wiper2019.tistory.com/183)
