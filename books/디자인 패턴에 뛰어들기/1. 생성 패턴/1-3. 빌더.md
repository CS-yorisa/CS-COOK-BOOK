# 빌더
## 문제 상황
![빌더 예시 1](https://refactoring.guru/images/patterns/diagrams/builder/problem1.png)
- 집(객체)을 만드는 방법에 대해서 생각하면, 기둥, 벽, 바닥, 천장을 만들고, 문, 창문을 설치하면 됨
![빌더 예시 2](https://refactoring.guru/images/patterns/diagrams/builder/problem2.png)
- 더 크고 다양한 집을 짓는다면? (새로운 현관 스타일, 정원 디자인 등)
	- 클래스를 변경하지 않는다면, 각 조건에 따른 매개변수, 메소드 작성이 필요함
	- 대부분의 매개변수가 항상 활용되는것이 아니기 때문에 코드가 **못생겨질 것**

## 해결 방법
![빌더 해결 방법](https://refactoring.guru/images/patterns/diagrams/builder/solution1.png)
- 객체 생성 코드를 추출하여 *builders*(건축업자)라는 별도의 객체로 이동
- 객체 생성을 일런의 단계로 정리, 필요하다면 *builder*객체에서 실행
	- 모든 단계를 호출할 필요 없이, 필요한 특정 단계만 호출하면 됨

### 디렉터(관리자)
- 빌더 단계들에 대한 일련의 호출을 디렉터라는 별도의 클래스로 추출할 수 있음
- 디렉터는 건축 단계들을 실행하는 순서를 정의
- 디렉터는 필수사항은 아니지만, 다양한 루틴을 관리할 수 있음

## 빌더 패턴
![빌더 패턴](https://refactoring.guru/images/patterns/diagrams/builder/structure.png)
- 빌더 (인터페이스) : 모든 유형의 빌더에 공통적인 제품 생성 단계
- 구상 빌더 (concrete builder) : 생성 단계들의 다양한 구성 제공, 공통 인터페이스를 따르지 않는 제품 생산 가능
- 제품 : 구상 빌더에 의해 나온 결과
- 디렉터 : 생성 단계 호출 순서를 정의, 재사용 가능
- 클라이언트 : 빌더 객체 중 하나를 디렉터와 연결

### 빌더 패턴 예시
- spring boot builder
- Java string builder (→ Python `str.join()`)
- python collections.namedtuple
- 추상적인 예시로는 다양한 집을 짓기, 자동차 만들기, 드럼 만들기, 노트분 사양 선택 등

## 빌더 패턴 적용
- 점층적 생성자를 제거하기 위하여 사용
	- 여러 개의 선택적 매개변수가 있는 생성자를 호출하는 것 보다, 오버로드 하여 더 적은 매개변수를 사용
- 코드 일부의 다른 표현을 생성할 수 있음
- 빌터를 사용하여 복합체 트리들 또는 복잡한 객체 생성

## 장단점
- 장점
	- 객체들을 단계별 생성하거나, 생성단계들을 연기 및 재귀적 실행 가능
	- 다양한 표현을 만들 때 같은 코드를 재사용 가능
	- 단일 책임 원칙
- 단점
	- 패턴이 여러 개의 새 클래스를 생성해야 하므로 복잡성 증가

## 다른 패턴과의 관계 
- [1-1. 팩토리 메서드](1-1.%20팩토리%20메서드.md)는 복잡성이 낮고 자식 클래스를 통해 커스터마이징, 빌더 패턴 등으로 이어지며 더 유연하고 복잡한 구조로 발전
- 빌더는 복잡한 객체들을 단계적 생성에 중점, 추상 팩토리는 관련된 객체들의 패밀리들을 생성하는데 중점
	- 추상 팩토리는 제품을 즉시 반환
	- 빌더는 제품을 가져오기 전에 몇 가지 추가 생성 단계 실행 가능
