[TOC]

# 014. 프로세서는 무조건 빠른 게 좋을까?

> 앞에서 단순화한 프로세서와 달리 실제 프로세서는 **성능을 중심으로 세부 사항이 훨씬 복잡하게 구성**되어 있음

<br>

## 프로세서 동작 사이클

> 프로세서는 **인출, 해석, 실행** 사이클을 계속 반복 수행

- 메모리에서 다음에 처리할 **명령어를 인출 (instruction fetch)**

  > 보통은 다음 메모리 위치에 저장된 명령어 (또는, GOTO나 IFZERO 가 명시하는 위치)

- 가져온 **명령어를 해석 (instruction Decode)**

  > 명령어가 무슨 일을 하는지 파악하고 명령어를 수행하는 데 필요한 모든 준비를 마침

- **명령어를 실행 (instruction execution)**

  - 메모리에서 정보를 가져오고, **산술 연산이나 논리 연산**을 수행
  - 그 결과를 저장하는 일련의 작업을 **명령어에 따라 적절하게 조합**

- **인출 단계**로 되돌아가 반복

### 실제 컴퓨터와 프로그램

> 실제 컴퓨터에는 모형 컴퓨터보다 많은 명령어가 있지만, **기본 명령어의 유형**은 같음

- 산술 연산 수행, 비교 또는 분기, 컴퓨터의 나머지 부분을 **제어하는 방법이 더 많음**

- 일반적으로 프로세서에는 **수십 개에서 수백 개의 명령어**가 있음

  - 명령어와 데이터는 여러 개의 메모리 위치를 차지 **(보통 2~8바이트)**

- 실제 프로세서에는 **누산기(레지스터)**가 여러 개 있음 **(보통 16개 또는 32개)**

  > 초고속 메모리 역할을 하는 누산기에 **중간 결과를 하나 이상** 담을 수 있음

- 실제 프로그램은 **모형 컴퓨터 예제에 비해 방대**하며, 흔히 **명령어 수백만 개**로 이루어짐

<br>

## 컴퓨터 아키텍처

> 프로세서 설계와 더불어 **프로세서와 컴퓨터 나머지 부분 간의 연결 방식 설계**를 다루는 분야

### 명령어 집합

> 프로세서가 제공하는 **명령어 레퍼토리**

- 컴퓨터 아키텍처는 기능성, 속도, 복잡도, 전력 소모 정도, 프로그램 가능성 등 **상충하는 요구 간 복잡한 트레이드오프(상충 관계)를 수반**함

  > "일반적으로 산술 장치의 내부 자원 운영은 **빠른 연산 속도**에 대한 욕구와 (중략) 기계의 **단순성 또는 저비용**에 대한 욕구 사이의 절충으로 결정된다."
  >
  > **[폰 노이만]**

- 이처럼 다양한 요소를 고려하여 **적당한 규모**로 이루어질 필요가 있음

---

### 프로세서와 나머지 부분의 연결

- 프로세서 속도는 매우 빨라서 **명령어 한 개를 1나노초보다 훨씬 짧은 시간 내**에 수행함

  > '나노'는 10억분의 1을 뜻함

- 메모리 속도는 비교적 매우 느려서, **데이터와 명령어를 인출하는 데 10~20나노초** 정도 걸림

- 현대 컴퓨터 아키텍처는 **캐시**라는 고속 메모리를 몇 개 사용함

  > **최근 사용된 명령어와 데이터**를 담아두고, 필요에 따라 빠르게 접근 가능

---

### 다양한 아키텍처 기법

#### 파이프라이닝 (pipelining)

> **인출과 실행 단계가 겹치도록** 프로세서를 설계해서 **명령어 여러 개가 다양한 단계에 걸쳐 진행**

![image](https://user-images.githubusercontent.com/87461594/175918194-145215c9-f242-45e5-8cb0-dc04efc10bab.png)

- 명령어 한 개가 완료되는 데는 같은 시간이 걸리지만, **여러 개의 명령어를 동시에 처리**하여 **전체적인 처리 속도는 빨라짐**

#### 명령어 병렬 실행

> 다수의 명령어를 **병렬적으로 실행**하는 방법

![image](https://user-images.githubusercontent.com/87461594/175918511-c34d08d4-b9a5-4813-bd02-ae89128ba1aa.png)

- 연산이 서로 의존성이 없다면 **여러 연산을 동시에 수행**하여 빠르게 연산을 처리
- **동시에 수행할 수 있는 대상을 찾는 것**이 병렬처리의 시작점

#### 여러 프로세서 동시 작업

> 단일 집적회로 칩에 **여러 개의 코어**와 캐시 메모리 적용

- 오늘날 노트북과 휴대전화에서 표준으로 사용되는 기술
- 집적회로의 **선폭이 작아질수록** 칩에 더 많은 트랜지스터 탑재 가능
- 개별 프로세서는 더 이상 빨라지지 않아도, **더 많은 코어를 사용해서 실질적인 연산 속도 증가**

---

### 다양한 트레이드오프

#### 데스크탑 (성능 우선)

> 전력과 물리적 공간이 비교적 넉넉한 경우

- 프로세서가 **가능한 한 빨리 작동**하도록 만드는 데 집중

#### 노트북 (휴대성, 저전력)

> 물리적 공간이 협소, 배터리를 통해 전력 공급

- 데스크탑용 프로세서보다 **더 느리고 전력을 적게 쓰는 경향**

#### 휴대전화, 태블릿 PC (휴대성 극대화)

> **'ARM'** 이라는 프로세서 설계 사용

- ARM 프로세서 설계는 **전력을 적게 사용**하도록 특별히 설계된 방식
- 영국 회사인 **Arm 홀딩스**에서 라이선스를 관리

<br>

## 프로세서 간의 속도 비교

> 프로세서 간에 속도를 비교하는 것은 **어려울 뿐만 아니라 그다지 의미도 없음**

- 프로세서는 비교하기 어려울 만큼 **서로 다른 방식으로 처리**되기도 함

  > 두 수를 더하고 다른 위치에 결과를 저장하기 위해 필요한 명령어의 개수 **(예시)**

  - **프로세서 1 :** 모형 프로세서처럼 세 개의 명령어가 필요
  - **프로세서 2 :** 두 개의 명령어만 필요
  - **프로세서 3 :** 단일 명령어로 처리

- 프로세서가 전력 소모를 낮추고자 **빠른 실행속도를 포기**하기도 함

- 전력이 배터리에서 공급되는지 아닌지에 따라 **속도를 동적으로 조정**하기도 함

### [I7-12700F (데스크탑) vs I7-12700H (모바일)]

#### I7-12700F (데스크탑)

> **고성능, 고전력, 저비용**

![image](https://user-images.githubusercontent.com/87461594/175922321-b62359ca-9c63-4511-82a9-6c346ab0fc16.png)

![image](https://user-images.githubusercontent.com/87461594/175923031-1c4202ad-103c-4617-bf6f-8cd1644b1c8b.png)

![image](https://user-images.githubusercontent.com/87461594/175922102-d7db715e-073e-478e-a089-4bce4533acf1.png)

#### I7-12700H (모바일)

> **저성능, 저전력, 고비용**

![image](https://user-images.githubusercontent.com/87461594/175922368-148755be-81fe-4def-b8d4-fb1987cfa592.png)

![image](https://user-images.githubusercontent.com/87461594/175923057-2037e67c-f15b-4184-87c6-4687912f1f57.png)

![image](https://user-images.githubusercontent.com/87461594/175922224-42f12139-a014-4418-b538-0d3563be7dfb.png)

> 그러므로 **어떤 프로세서가 다른 것보다 '빠르다'는 주장은 조심스럽게 받아들여야 함**

<br>

## [추가 학습자료]

[중앙처리장치(CPU) - 2 (CPU 명령어)](https://gamedevlog.tistory.com/70?category=891674)

[중앙처리장치(CPU) - 3 (CPU 명령어 사이클)](https://gamedevlog.tistory.com/71?category=891674)

[중앙처리장치(CPU) - 4 (명령어 파이프라인)](https://gamedevlog.tistory.com/72?category=891674)

[중앙처리장치(CPU) - 5 (병렬 컴퓨팅, 병렬 컴퓨터)](https://gamedevlog.tistory.com/73?category=891674)
